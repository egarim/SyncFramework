@page "/"
@using SyncFramework.Playground.EfCore;
@using MudBlazor;
@inject ISnackbar Snackbar

<PageTitle>EfCore Demo</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
    <MudCard Elevation="3" Class="mb-4">
        <MudCardHeader>
            <MudText Typo="Typo.h4">SyncFramework: A Demonstration</MudText>
        </MudCardHeader>
        <MudCardContent>
            <MudText Typo="Typo.body1">
                A professional demonstration of the <MudLink Underline="Underline.Always" Target="_blank" Href="https://github.com/egarim/SyncFramework">SyncFramework</MudLink>
                for Entity Framework Core, developed by <MudLink Target="_blank" Underline="Underline.Always" Href="https://www.jocheojeda.com">Joche Ojeda</MudLink>,
                CTO at <MudLink Underline="Underline.Always" Target="_blank" Href="https://www.xari.io">XARI</MudLink> and
                <MudLink Underline="Underline.Always" Target="_blank" Href="https://www.bitframeworks.com">BIT Frameworks</MudLink>.
            </MudText>
            <MudText Typo="Typo.body2" Class="mt-2">
                All required NuGet packages are available at <MudLink Target="_blank" Underline="Underline.Always" Href="https://www.nuget.org/packages?q=%09BIT.Data.Sync">Nuget.org</MudLink>.
                View our <MudLink Target="_blank" Underline="Underline.Always" Href="https://youtu.be/JqjGvcbIUzQ">video tutorial</MudLink> where
                <MudLink Target="_blank" Underline="Underline.Always" Href="https://xafmarin.com">Javier</MudLink> and
                <MudLink Target="_blank" Underline="Underline.Always" Href="https://www.jocheojeda.com">I</MudLink> explain the SyncFramework playground.
            </MudText>
        </MudCardContent>
    </MudCard>

 

    

    <MudText Typo="Typo.h5" Class="mb-3">Nodes</MudText>
    <MudPaper Elevation="2" Class="pa-4">
        <MudTabs>
            <MudTabPanel Text="Server">
                <MudText Typo="Typo.subtitle1" Class="mb-2">Node Management</MudText>
                <MudGrid>
                    <MudItem xs="12" sm="6" md="4">
                        <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Add"
                                   Color="Color.Primary" OnClick="AddClientNode" FullWidth="true">
                            Add Client Node
                        </MudButton>
                    </MudItem>
                    <MudItem xs="12" sm="6" md="4">
                        <MudCheckBox T="bool" Label="Generate Random Data"
                                     Color="Color.Primary" @bind-Checked="@GenerateRandomData" />
                    </MudItem>
                    <MudItem xs="12" sm="6" md="4">
                        <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.FileDownload"
                                   Color="Color.Secondary" OnClick="DownloadAllDatabases" FullWidth="true">
                            Download All Databases
                        </MudButton>
                    </MudItem>
                </MudGrid>

                <MudDivider Class="my-4" />

                <MudText Typo="Typo.subtitle1" Class="mb-2">Database Compatibility</MudText>
                <MudText Typo="Typo.caption" Class="mb-3">Check options to generate deltas compatible with other databases</MudText>

                <MudGrid>
                    <MudItem xs="4">
                        <MudCheckBox T="bool" Label="PostgreSQL" Color="Color.Info" @bind-Checked="@Postgres" />
                    </MudItem>
                    <MudItem xs="4">
                        <MudCheckBox T="bool" Label="MySQL" Color="Color.Info" @bind-Checked="@MySql" />
                    </MudItem>
                    <MudItem xs="4">
                        <MudCheckBox T="bool" Label="SQL Server" Color="Color.Info" @bind-Checked="@SqlServer" />
                    </MudItem>
                </MudGrid>
                <SyncServerComponent DeltaStore="@ServerDeltaStore" NodeId="@NodeId" @ref="@serverComponent" />
            </MudTabPanel>
            @if (ClientNodes.Any())
            {
                @foreach (var item in ClientNodes)
                {
                    <MudTabPanel Text="@item.Id">
                        <ClientNodeComponent item="@item"></ClientNodeComponent>
                    </MudTabPanel>
                }
            }
            else
            {
                <MudTabPanel Text="No Clients">
                    <MudAlert Severity="Severity.Info">No client nodes added yet. Click "Add client node" to begin.</MudAlert>
                </MudTabPanel>
            }
        </MudTabs>
    </MudPaper>
</MudContainer>

<MudScrollToTop>
    <MudFab Color="Color.Tertiary" Size="Size.Small" Icon="@Icons.Material.Filled.ArrowCircleUp" />
</MudScrollToTop>